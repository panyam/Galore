"use strict";(this.webpackChunkgalore=this.webpackChunkgalore||[]).push([[944],{875(t,e,s){s.d(e,{Fi:()=>a,R4:()=>i,UB:()=>o,fc:()=>r,x1:()=>l});var n=s(6542);class r{constructor(t,e,s,...n){this.id=t,this.sym=e,this.value=s,this.children=[],this.children=n||[]}get childCount(){return this.children.length}childAt(t){return t<0?this.children[this.children.length+t]:this.children[t]}get isTerminal(){return this.sym.isTerminal}add(t,e=-1){if(this.isTerminal)throw new Error(`Cannot add children (${t.sym.label}) to a terminal node: ${this.sym.label}`);return e<0?this.children.push(t):this.children.splice(e,0,t),this}splice(t,e,...s){return this.children.splice(t,e,...s),this}get reprString(){return this.debugValue(!1).join("\n")}debugValue(t=!0){if(t){const e=[this.sym.label];return this.value&&e.push(this.value),this.children.length>0&&e.push(this.children.map(e=>e.debugValue(t))),e}{const e=[];return this.value,e.push(null==this.value?this.sym.label:this.sym.label+" - "+this.value),this.children.forEach(s=>s.debugValue(t).forEach(t=>e.push("  "+t))),e}}}class i extends r{constructor(){super(...arguments),this.parent=null}add(t,e=-1){return super.add(t,e),t.parent=this,this}splice(t,e,...s){for(const t of s)t.parent=this;return super.splice(t,e,...s)}}class l{setTokenizer(t){return this.tokenbuffer=new n.UH(t,null),this}getSym(t){const e=this.grammar.getSym(t.tag);if(null==e)throw new Error("Invalid token tag: "+t.tag+", Value: "+t.value);return e}}class o extends l{parse(t,e=null){return"string"==typeof t&&(t=new n.nZ(t)),this.parseInput(t,e)}}class a extends l{parse(t,e=null){return"string"==typeof t&&(t=new n.nZ(t)),this.parseInput(t,e)}}},1382(t,e,s){s.r(e),s.d(e,{expandNullProductions:()=>o,hasDirectLeftRecursion:()=>u,leftFactor:()=>c,removeCycles:()=>h,removeDirectLeftRecursion:()=>d,removeIndirectLeftRecursion:()=>m,removeNullProductions:()=>a,removeUselessSymbols:()=>l});var n=s(6148),r=s(1787),i=s(5057);function l(t,e=null){const s=t.terminalDerivingSymbols;t.removeRules(t=>!s.has(t.nt)||t.rhs.syms.findIndex(t=>!t.isTerminal&&!s.has(t))>=0),t.refresh();const n=t.reachableSymbols(e);t.removeRules(t=>!n.has(t.nt)||t.rhs.syms.findIndex(t=>!t.isTerminal&&!n.has(t))>=0),t.refresh()}function o(t,e,s){if(s=s||{},e.length>0){const n=t.nullables,r=e.toString();r in s||(s[r]=e,e.syms.forEach((r,i)=>{if(n.isNullable(r)){const n=e.copy().splice(i,1);o(t,n,s)}}))}return s}function a(t,e=null){if(null==e)t.forEachNT(e=>a(t,e));else{const s={};t.rulesForNT(e).forEach(e=>o(t,e.rhs,s)),t.removeRules(t=>t.nt==e);for(const n in s)t.add(e,s[n]);t.removeRules(t=>t.nt==e&&0==t.rhs.length)}}function h(t){a(t)}function u(t,e){return!1}function c(t,e=null){if(null==e)t.forEachNT(e=>c(t,e));else{const s=new i.bd(t=>t.label);t.forEachRule(e,t=>{s.add(t.rhs.syms)}),s.debugValue,t.removeRules(t=>t.nt==e);const l=(e,s,i)=>{if(0==e.children.size)i.length>0&&t.add(s,i.copy());else if(1!=e.children.size||e.isLeaf){const o=e.children.size>0?t.newAuxNT():null;if(i=i.copy(),t.add(s,null==o?i:i.append(o)),e.isLeaf&&null!=o&&t.add(o,new r.Mx),null!=o)for(const t of e.children.values())n.vA(null!=t.value),l(t,o,new r.Mx(t.value))}else{const t=e.children.values().next().value;n.vA(null!=t.value),l(t,s,i.append(t.value))}};for(const t of s.root.children.values())l(t,e,new r.Mx(t.value))}}function d(t,e=null){if(null==e)t.forEachNT(e=>d(t,e));else{const s=[],n=[];if(t.rulesForNT(e).forEach(t=>{t.rhs.length>0&&t.rhs.syms[0]==e?s.push(t.rhs.slice(1,t.rhs.length)):n.push(t.rhs)}),0==s.length)return;t.removeRules(t=>t.nt==e);const i=t.newAuxNT();for(const s of n)t.add(e,s.copy().append(i));t.add(i,new r.Mx);for(const e of s)t.add(i,e.copy().append(i))}}function m(t){n.vA(!1,"Not yet implemented")}},1787(t,e,s){s.d(e,{Dj:()=>a,IS:()=>u,Mx:()=>o,gr:()=>l,jO:()=>h});var n=s(6148),r=s(5226),i=s(5057);class l{constructor(t,e,s,n=null){this.grammar=t,this.label=e,this.isTerminal=s,this.isAuxiliary=!1,this.auxType=null,this.precedence=1,this.assocLeft=!0,this.creationId=-1,this.isTerminal=s,this.label=e,this.id=null==n?l.idCounter--:n}compareTo(t){return this.label.localeCompare(t.label)}equals(t){return this.label==t.label}toString(){return this.label}}l.idCounter=-1;class o{constructor(...t){this.syms=t||[]}append(...t){for(const e of t)this.syms.push(e);return this}extend(...t){for(const e of t)this.append(...e.syms);return this}copy(){return new o(...this.syms)}add(t){this.syms.push(t)}isTerminal(t){return this.syms[t].isTerminal}get length(){return this.syms.length}toString(){return this.syms.map(t=>t.toString()).join(" ")}slice(t,e){return new o(...this.syms.slice(t,e))}splice(t,e,...s){return this.syms.splice(t,e,...s),this}compareTo(t){for(let e=0;e<this.syms.length&&e<t.syms.length;e++){const s=this.syms[e].compareTo(t.syms[e]);if(0!=s)return s}return this.syms.length-t.syms.length}equals(t){return 0==this.compareTo(t)}containsAt(t,e){let s=0;for(;s<e.length&&t+s<this.syms.length;s++)if(!this.syms[t+s].equals(e.syms[s]))return!1;return s==e.length}get debugString(){return this.syms.map(t=>t.label).join(" ")}}class a{constructor(t){this.value=t}get isFunction(){return"string"==typeof this.value}get isChildPosition(){return"number"==typeof this.value}}class h{constructor(t,e,s=null){if(this.nt=t,this.rhs=e,this.action=s,t.isTerminal)throw new Error("Cannot add rules to a terminal")}get debugString(){return`${this.nt.label} -> ${this.rhs.debugString}`}equals(t){return 0==this.compareTo(t)}compareTo(t){n.vA(!isNaN(this.id));const e=this.nt.compareTo(t.nt);return 0==e&&this.rhs.compareTo(t.rhs),e}}class u{static make(t){const e=new u;return t(e),e}constructor(t){this.startSymbol=null,this.modified=!0,this.symbolSet=new i.GG(t=>t.label),this.allRules=[],this._rulesForNT=null,this._followSets=null,this._hasNull=!1,this.auxNTCount=0,t=t||{},this.auxNTPrefix=t.auxNTPrefix||"$",this.Null=this.newTerm(""),this.Eof=this.newTerm("$end")}rulesForNT(t){if(n.vA(!t.isTerminal),null==this._rulesForNT){this._rulesForNT={};for(const t of this.allRules)t.nt.label in this._rulesForNT||(this._rulesForNT[t.nt.label]=[]),this._rulesForNT[t.nt.label].push(t)}return t.label in this._rulesForNT||(this._rulesForNT[t.label]=[]),this._rulesForNT[t.label]}get nullables(){return this.firstSets.nullables}get firstSets(){return this.followSets.firstSets}get followSets(){return(this.modified||null==this._followSets)&&this.refresh(),n.vA(null!=this._followSets),this._followSets}get augStartRule(){return this._AugStartRule}augmentStartSymbol(t="$accept"){n.vA(null==this._AugStartRule,"Ensure this grammar has not yet been augmented."),n.vA(null!=this.startSymbol,"Start symbol not yet set");const e=this.newNT(t);return this._AugStartRule=new h(e,new o(this.startSymbol)),this.addRule(this._AugStartRule,0),this}refresh(){return this.symbolSet.entries.forEach((t,e)=>t.id=e),this._rulesForNT=null,this.allRules.forEach((t,e)=>{t.id=e}),this._followSets=new i.de(this),this.modified=!1,this}addTerminals(...t){for(const e of t)this.newTerm(e)}get terminals(){return this.symbolSet.entries.filter(t=>t.isTerminal)}get allNonTerminals(){return this.symbolSet.entries.filter(t=>!t.isTerminal)}get nonTerminals(){return this.symbolSet.entries.filter(t=>!t.isTerminal&&!t.isAuxiliary)}get auxNonTerminals(){return this.symbolSet.entries.filter(t=>t.isAuxiliary)}get allSymbols(){return this.symbolSet.entries}forEachNT(t){for(const e of this.symbolSet.entries)if(!e.isTerminal&&0==t(e))return}forEachRule(t,e){const s=null==t?this.allRules:this.rulesForNT(t)||[];for(let t=0;t<s.length;t++)if(0==e(s[t],t))return!1;return!0}getRule(t,e){return"string"==typeof t&&(t=this.getSym(t)),n.vA(null!=t),this.rulesForNT(t)[e]}findRule(t,e){return this.rulesForNT(t).findIndex(s=>s.nt==t&&s.rhs.equals(e))}add(t,e,s=null){let n=null;return"string"==typeof t?(n=this.getSym(t),null==n&&(n=this.newNT(t))):n=this.ensureSym(t),this.addRule(new h(n,e,s))}addRule(t,e=-1){if(this.findRule(t.nt,t.rhs)>=0)throw new Error("Duplicate rule: "+t.debugString);return t.id=this.allRules.length,0==t.rhs.length&&(this._hasNull=!0),e<0?this.allRules.push(t):this.allRules.splice(e,0,t),this._rulesForNT=null,this.modified=!0,t}removeRules(t){return this.allRules=this.allRules.filter(e=>!t(e)),this._rulesForNT=null,this.modified=!0,!0}removeSymbols(t){let e=!1;const s=[];return this.allRules.forEach(n=>{if(!t(n.nt))if(0==n.rhs.length)s.push(n);else{const r=new o(...n.rhs.syms.filter(e=>!t(e)));e=e||n.rhs.length!=r.length,r.length>0&&s.push(new h(n.nt,r))}}),this.allRules=s,e=this.symbolSet.remove(t)||e,this.modified=this.modified||e,e}getSymById(t){return this.symbolSet.get(t)}getSym(t){return this.symbolSet.getByKey(t)}ensureSym(t,e=!1){const s=this.symbolSet.ensure(t,e);return t==s?s.creationId<0&&(s.creationId=this.symbolSet.size):n.vA(!e,"Should have already thrown error"),s}T(t,e=!1){let s=this.getSym(t);if(null!=s){if(e)throw new Error(`Terminal ${t} is already exists`);if(!s.isTerminal)throw new Error(`Symbol (${t}) already exists as a non-terminal`)}else s=new l(this,t,!0),s=this.ensureSym(s,!0);return s}NT(t,e=!1,s=!1){let n=this.getSym(t);if(null!=n){if(s)throw new Error(`Non-terminal ${t} is already exists`);if(n.isTerminal)throw new Error(`Symbol (${t}) already exists as a terminal`)}else n=new l(this,t,!1),n.isAuxiliary=e,n=this.ensureSym(n,!0),e||null!=this.startSymbol||(this.startSymbol=n);return n}newTerm(t){return this.T(t,!0)}newNT(t,e=!1){return this.NT(t,e,!0)}isTerminal(t){const e=this.getSym(t);return null!=e&&e.isTerminal}isNT(t){const e=this.getSym(t);return null!=e&&!e.isTerminal&&!e.isAuxiliary}isAuxNT(t){const e=this.getSym(t);return null!=e&&!e.isTerminal&&e.isAuxiliary}seq(...t){if(1==t.length)return this.normalizeRule(t[0]);{const e=new o;for(const s of t){const t=this.normalizeRule(s);for(let s=0;s<t.length;s++)e.add(t.syms[s])}return e}}anyof(...t){return 1==t.length?this.normalizeRule(t[0]):new o(this.ensureAuxNT(...t.map(t=>this.normalizeRule(t))))}opt(t){const e=this.anyof(t,new o),s=e.syms[0];return n.vA(1==e.syms.length&&s.isAuxiliary,"NT must be an auxiliary symbol"),s.auxType="opt",e}atleast0(t,e=!0){const s=this.normalizeRule(t);let n=this.findAuxNT(e=>{const n=this.rulesForNT(e);if(2!=n.length)return!1;let r=0;if(0==n[0].rhs.length)r=1;else{if(0!=n[1].rhs.length)return!1;r=0}const i=n[r].rhs;return i.length==1+t.length&&(i.syms[0].equals(e)?i.containsAt(1,s):!!i.syms[i.length-1].equals(e)&&i.containsAt(0,s))});return null==n&&(n=this.newAuxNT(),n.auxType=e?"atleast0:left":"atleast0",this.add(n,new o),e?this.add(n,new o(n).extend(s)):this.add(n,s.copy().append(n))),new o(n)}atleast1(t,e=!0){const s=this.normalizeRule(t);let n=this.findAuxNT(e=>{const n=this.rulesForNT(e);if(2!=n.length)return!1;let r=0;if(n[0].rhs.equals(s))r=1;else{if(!n[1].rhs.equals(s))return!1;r=0}const i=n[r].rhs;return i.length==1+t.length&&(i.syms[0].equals(e)?i.containsAt(1,s):!!i.syms[i.length-1].equals(e)&&i.containsAt(0,s))});return null==n&&(n=this.newAuxNT(),n.auxType=e?"atleast1:left":"atleast1",this.add(n,s),e?this.add(n,new o(n).extend(s)):this.add(n,s.copy().append(n))),new o(n)}normalizeRule(t){if("string"==typeof t){const e=this.getSym(t);if(null==e)throw new Error(`Invalid symbol: '${t}'`);return new o(e)}return t}newAuxNTName(){return this.auxNTPrefix+this.auxNTCount++}newAuxNT(t=""){return""==t&&(t=this.newAuxNTName()),this.newNT(t,!0)}ensureAuxNT(...t){let e=this.findAuxNTByRules(...t);if(null==e){e=this.newAuxNT(),e.auxType="anyof";for(const s of t)this.add(e,s)}return e}findAuxNT(t){for(const e of this.symbolSet.entries)if(e.isAuxiliary&&t(e))return e;return null}findAuxNTByRules(...t){return this.findAuxNT(e=>{const s=this.rulesForNT(e);if(s.length!=t.length)return!1;for(let e=0;e<s.length;e++)if(!s[e].rhs.equals(t[e]))return!1;return!0})}print(t=null){const e=(t=t||{}).ruleSep||"->",s=t.includeSemiColon||!1,n=t.lambdaSymbol||"",r=[];return this.forEachRule(null,(t,i)=>{let l=`${t.nt.label} ${e} `;t.rhs.length>0?l+=t.rhs.debugString:l+=n,s&&(l+=" ;"),r.push(l)}),r}get debugValue(){const t=[];return this.forEachRule(null,(e,s)=>{t.push(`${e.nt.label} -> ${e.rhs.debugString}`)}),t}get terminalDerivingSymbols(){const t=new i.dd(this,null);let e=-1,s=!0;for(;0!=e;){e=0;for(const n of this.allRules){s=!0;for(const r of n.rhs.syms)t.has(r)||(r.isTerminal?(t.add(r),e++):s=!1);s&&!t.has(n.nt)&&(t.add(n.nt),e++)}}return t}reachableSymbols(t=null){null==t&&(t=this._AugStartRule?this._AugStartRule.nt:this.startSymbol),n.vA(null!=t,"Start symbol does not exist");const e=new i.dd(this,!1).add(t);let s=[t];for(;s.length>0;){const t=[];for(const n of s)for(const s of this.rulesForNT(n))for(const n of s.rhs.syms)n.isTerminal||e.has(n)||(t.push(n),e.add(n));s=t}return e}get cycles(){return(0,r.allMinimalCycles)(this.allNonTerminals,t=>t.label,t=>{const e=[];return this.forEachRule(t,(s,n)=>{s.rhs.syms.forEach((r,i)=>{r.isTerminal||this.nullables.isStrNullable(s.rhs,0,i-1)&&this.nullables.isStrNullable(s.rhs,i+1)&&e.push([r,[t,n]])})}),e})}get leftRecursion(){return(0,r.allMinimalCycles)(this.allNonTerminals,t=>t.id,t=>{const e=[];return this.forEachRule(t,(t,s)=>{t.rhs.syms.forEach((t,n)=>{if(!t.isTerminal)return e.push([t,s]),this.nullables.isNullable(t)})}),e})}}},2056(t,e,s){s.r(e),s.d(e,{ParseStack:()=>a,ParseTable:()=>o,Parser:()=>h});var n=s(6148),r=s(1787),i=s(875),l=s(4291);class o{constructor(t){this.grammar=t,this.refresh()}refresh(){return this.entries=new Map,this.grammar.followSets.refresh(),this.grammar.forEachRule(null,(t,e)=>{this.processRule(t,e)}),(0,l.Jy)(this.grammar,!1),this.grammar.cycles,this.grammar.leftRecursion,this}get count(){let t=0;for(const e of this.entries.values())for(const s of e.values())t+=s.length;return t}ensureEntry(t,e){n.vA(!t.isTerminal&&e.isTerminal);let s=this.entries.get(t.id);s||(s=new Map,this.entries.set(t.id,s));let r=s.get(e.id);return r||(r=[],s.set(e.id,r)),r}add(t,e,s){const n=this.ensureEntry(t,e);return n.findIndex(t=>t.equals(s))<0&&n.push(s),1==n.length}get(t,e){return this.ensureEntry(t,e)}forEachEntry(t){for(const e of this.entries.keys()){const s=this.entries.get(e)||null;n.vA(null!=s);const r=this.grammar.getSymById(e);n.vA(null!=r);for(const e of s.keys()){const i=this.grammar.getSymById(e);if(n.vA(null!=i),0==t(r,i,s.get(e)||[]))return}}}get debugValue(){const t={};return this.forEachEntry((e,s,n)=>{t[e.label]=t[e.label]||{},t[e.label][s.label]=t[e.label][s.label]||[];const r=t[e.label][s.label];for(const t of n)r.push(t.debugString)}),t}processRule(t,e){const s=this.grammar.firstSets;let r=!1;s.forEachTermIn(t.rhs,0,e=>{null==e?r=!0:this.add(t.nt,e,t)}),r&&this.grammar.followSets.forEachTerm(t.nt,e=>{n.vA(null!=e,"Follow sets cannot have null"),this.add(t.nt,e,t)})}}class a{constructor(t){this.idCounter=0,this.parseTable=t,this.stack=[];const e=t.grammar;n.vA(null!=e.startSymbol,"Start symbol not selected"),this.docNode=this.push(e.Eof,new i.R4(this.idCounter++,new r.gr(e,"<DOC>",!1),null)),this.rootNode=this.push(e.startSymbol),this.docNode.add(this.rootNode)}get debugString(){return"Stack: ["+this.stack.map(t=>t[0].label).join(", ")+"]"}push(t,e=null){return e||(e=new i.R4(this.idCounter++,t,null)),this.stack.push([t,e]),e}top(){return this.stack[this.stack.length-1]}pop(){return 0==this.stack.length&&n.vA(!1,"Stacks are empty"),this.stack.pop()}get isEmpty(){return 0==this.stack.length}}class h extends i.UB{constructor(t){super(),this.parseTable=t,n.vA(null!=t.grammar.startSymbol,"Start symbol not selected")}get grammar(){return this.parseTable.grammar}parseInput(t,e=null){this.stack=new a(this.parseTable);const s=this.tokenbuffer,r=this.stack,i=this.grammar;let l,o,h;do{l=s.peek(t),[o,h]=r.top();const e=null==l?i.Eof:this.getSym(l),a=null==l?null:l.value;if(o.isTerminal)o==e?this.consumeTokenAndPop(t,e,l):this.processInvalidToken(e,l);else{const t=this.parseTable.get(o,e);if(1!=t.length)console.log("TopItem: ",o),console.log("nextSym: ",e),this.processInvalidReductions(h,o,e,a,t);else{const[e,s]=this.stack.pop();n.vA(s==h),n.vA(e==t[0].nt),n.vA(s.sym==e),this.popSymAndPushRule(s,t[0])}}[o,h]=r.top()}while(o!=i.Eof);return r.rootNode}popSymAndPushRule(t,e){for(let s=e.rhs.syms.length-1;s>=0;s--){const n=e.rhs.syms[s],r=this.stack.push(n);t.add(r,0)}}consumeTokenAndPop(t,e,s){const[r,i]=this.stack.top();n.vA(r==e),n.vA(i.sym==e),i.value=s.value,this.tokenbuffer.next(t),this.stack.pop()}processInvalidToken(t,e){throw new Error("Invalid token: "+t.label)}processInvalidReductions(t,e,s,n,r){throw new Error(`Invalid # reductions ${r.length} found ${e.label} -> ${s.label}`)}}},2597(t,e,s){s.r(e),s.d(e,{Loader:()=>c,NodeType:()=>a,TokenType:()=>o,Tokenizer:()=>u,load:()=>h});var n=s(6148),r=s(6542),i=s(1787);const l=t=>"number"==typeof t?""+t:t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var o,a;function h(t,e){e=e||{};const s=new i.IS(e.grammar||{}),n=new c(t,{...e,grammar:s}),r=n.generatedTokenizer.next.bind(n.generatedTokenizer);return(e.debug||"").split("|").findIndex(t=>"all"==t||"lexer"==t)>=0&&console.log("Prog: \n",`${n.generatedTokenizer.vm.prog.debugValue().join("\n")}`),[s,r]}function u(){const t=new r._F;return t.add(/->/,{tag:o.ARROW}),t.add(/\[/,{tag:o.OPEN_SQ}),t.add(/\]/,{tag:o.CLOSE_SQ}),t.add(/\(/,{tag:o.OPEN_PAREN}),t.add(/\)/,{tag:o.CLOSE_PAREN}),t.add(/\{/,{tag:o.OPEN_BRACE}),t.add(/\}/,{tag:o.CLOSE_BRACE}),t.add(/\*/,{tag:o.STAR}),t.add(/\+/,{tag:o.PLUS}),t.add(/\?/,{tag:o.QMARK}),t.add(/;/,{tag:o.SEMI_COLON}),t.add(/:/,{tag:o.COLON}),t.add(/\|/,{tag:o.PIPE}),t.add(/\s+/m,{tag:o.SPACES},()=>null),t.add(/\/\*.*?\*\//s,{tag:o.COMMENT},()=>null),t.add(/\/\/.*$/m,{tag:o.COMMENT},()=>null),t.add(r.CC.Lf,{tag:o.STRING},(t,e,s)=>(s.value=e.substring(s.start+1,s.end-1),s)),t.add(r.CC.cO,{tag:o.STRING},(t,e,s)=>(s.value=e.substring(s.start+1,s.end-1),s)),t.add(r.CC.yt,{tag:o.REGEX},(t,e,s)=>{const n=e.substring(s.positions[1][0],s.positions[1][1]),r=e.substring(s.positions[3][0],s.positions[3][1]);return s.value=[n,r],s}),t.add(/\d+/,{tag:o.NUMBER},(t,e,s)=>(s.value=parseInt(e.substring(s.start,s.end)),s)),t.add(/%([\w][\w\d_]*)/,{tag:o.PCT_IDENT},(t,e,s)=>(s.value=e.substring(s.start+1,s.end),s)),t.add(/\$\d+/,{tag:o.DOLLAR_NUM},(t,e,s)=>(s.value=parseInt(e.substring(s.start+1,s.end)),s)),t.add(/\$([\w][\w\d_]*)/,{tag:o.DOLLAR_IDENT},(t,e,s)=>(s.value=e.substring(s.start+1,s.end),s)),t.add(/[\w][\w\d_]*/,{tag:o.IDENT}),t}!function(t){t.STRING="STRING",t.REGEX="REGEX",t.NUMBER="NUMBER",t.SPACES="SPACES",t.IDENT="IDENT",t.PCT_IDENT="PCT_IDENT",t.STAR="STAR",t.PLUS="PLUS",t.QMARK="QMARK",t.PIPE="PIPE",t.DOLLAR_NUM="DOLLAR_NUM",t.DOLLAR_IDENT="DOLLAR_IDENT",t.OPEN_PAREN="OPEN_PAREN",t.CLOSE_PAREN="CLOSE_PAREN",t.OPEN_BRACE="OPEN_BRACE",t.CLOSE_BRACE="CLOSE_BRACE",t.OPEN_SQ="OPEN_SQ",t.CLOSE_SQ="CLOSE_SQ",t.COMMENT="COMMENT",t.ARROW="ARROW",t.COLCOLHYPHEN="COLCOLHYPHEN",t.COLON="COLON",t.SEMI_COLON="SEMI_COLON"}(o||(o={})),function(t){t.GRAMMAR="GRAMMAR",t.DECL="DECL",t.RULE="RULE",t.PROD_NULL="PROD_NULL",t.PROD_STR="PROD_STR",t.PROD_UNION="PROD_UNION",t.PROD_NAME="PROD_NAME",t.PROD_STRING="PROD_STRING",t.PROD_NUM="PROD_NUM",t.PROD_IDENT="PROD_IDENT",t.PROD_STAR="PROD_STAR",t.PROD_PLUS="PROD_PLUS",t.PROD_OPTIONAL="PROD_OPTIONAL",t.IDENT="IDENT",t.ERROR="ERROR",t.COMMENT="COMMENT"}(a||(a={}));class c{constructor(t,e){this.leftRecursive=!1,this.generatedTokenizer=new r._F,this.regexSyntax="js",e=e||{},this.symbolsByLabel={},this.grammar=e.grammar||new i.IS,this.leftRecursive=!("leftRecursive"in e)||e.leftRecursive||!1,this.newSymbolCallback=e.newSymbolCallback||null,this.tokenHandlers=e.tokenHandlers||{},this.parse(t)}symbolForLabel(t){return this.symbolsByLabel[t]||null}registerSymbol(t,e){n.vA(!(t in this.symbolsByLabel),`${t} is already registered`),this.symbolsByLabel[t]=e}ensureSymbol(t,e){let s=this.symbolForLabel(t);return null!=s||(this.newSymbolCallback&&(s=this.newSymbolCallback(t,e)||null),null==s&&(s=e?this.grammar.newTerm(t):this.grammar.newNT(t)),this.registerSymbol(t,s)),s}parse(t){const e=u();this.tokenizer=new r.UH((t,s)=>e.next(t,this),this),this.parseGrammar(new r.nZ(t))}parseRegex(t,e,s=0,n=""){if(""==n&&(n=this.regexSyntax),"js"==n){const n=this.tokenizer.expectToken(t,o.STRING,o.NUMBER,o.REGEX);let i;if(e&&0!=e.length||(e="/"+n.value[0]+"/"+n.value[1]),n.tag==o.STRING||n.tag==o.NUMBER){const t=l(n.value);i=r.M$.build(t,{tag:e,priority:s+20})}else{if(n.tag!=o.REGEX)throw new r.zy(n);{let t=n.value[0];n.value[1].length>0&&(t=new RegExp(n.value[0],n.value[1])),i=r.M$.build(t,{tag:e,priority:s+10})}}return i}{let n="";for(;t.hasMore&&"\n"!=t.currCh;)n+=t.currCh,t.advance();return n=n.trim(),e&&0!=e.length||(e="/"+n+"/"),new r.jO(r.M$.exprFromFlexRE(n),{tag:e,priority:s})}}parseGrammar(t){let e=this.tokenizer.peek(t);for(;null!=e;){if(e.tag==o.IDENT)this.parseDecl(t);else{if(e.tag!=o.PCT_IDENT)throw new SyntaxError(`Declaration must start with IDENT or PCT_IDENT.  Found: '${e.value}' instead.`);this.tokenizer.next(t),this.parseDirective(t,e.value)}e=this.tokenizer.peek(t)}}parseDirective(t,e){if("start"==e){const e=this.tokenizer.expectToken(t,o.IDENT);this.grammar.startSymbol=this.ensureSymbol(e.value,!1)}else if("resyntax"==e){const e=this.tokenizer.expectToken(t,o.IDENT);if("js"!=e.value&&"flex"!=e.value)throw new SyntaxError("Invalid regex syntax: "+e.value);this.regexSyntax=e.value}else if(e.startsWith("skip")){const s=this.parseRegex(t,"",30,e.endsWith("flex")?"flex":""),n=this.parseTokenHandler(t);n?this.generatedTokenizer.addRule(s,(t,e,s)=>(n(t,e,s,this),null)):this.generatedTokenizer.addRule(s,()=>null)}else{if(!e.startsWith("token")&&!e.startsWith("define"))throw new Error("Invalid directive: "+e);{const s=e.startsWith("define"),n=this.tokenizer.expectToken(t,o.IDENT,o.STRING);let r=n.value;n.tag!=o.STRING&&n.tag!=o.NUMBER||(r=`"${n.value}"`);const i=this.parseRegex(t,r,0,e.endsWith("flex")?"flex":"");if(s)this.generatedTokenizer.addVar(r,i.expr);else{const e=this.parseTokenHandler(t);this.generatedTokenizer.addRule(i,e),this.ensureSymbol(r,!0)}}}}parseTokenHandler(t){if(!this.tokenizer.consumeIf(t,o.OPEN_BRACE))return null;const e=this.tokenizer.expectToken(t,o.IDENT);return this.tokenizer.expectToken(t,o.CLOSE_BRACE),(t,s,n,r)=>{const i=this.tokenHandlers[e.value];if(!i)throw new Error("Handler method not found: "+e.value);return i(n,s,r)}}parseDecl(t){const e=this.tokenizer.expectToken(t,o.IDENT);if(this.tokenizer.consumeIf(t,o.ARROW,o.COLON)){const s=this.ensureSymbol(e.value,!1);if(s.isTerminal)s.isTerminal=!1;else if(s.isAuxiliary)throw new Error("NT is already auxiliary and cannot be reused.");for(const[e,n]of this.parseProductions(t,this.grammar,s))this.grammar.add(s,e,n);this.tokenizer.expectToken(t,o.SEMI_COLON)}}parseProductions(t,e,s){const n=[];for(;null!=this.tokenizer.peek(t);){const s=this.parseProd(t,e);if(n.push(s),!this.tokenizer.consumeIf(t,o.PIPE)&&this.tokenizer.nextMatches(t,o.CLOSE_SQ,o.CLOSE_PAREN,o.SEMI_COLON))break}return n}parseProd(t,e){const s=new i.Mx;for(;!this.tokenizer.nextMatches(t,o.CLOSE_PAREN,o.CLOSE_SQ,o.SEMI_COLON,o.PIPE,o.OPEN_BRACE);){let n=null;if(this.tokenizer.consumeIf(t,o.OPEN_PAREN)){const s=this.parseProductions(t,e,null);0==s.length||(n=1==s.length?s[0][0]:e.anyof(...s.map(t=>t[0]))),this.tokenizer.expectToken(t,o.CLOSE_PAREN)}else if(this.tokenizer.consumeIf(t,o.OPEN_SQ)){const s=this.parseProductions(t,e,null);0==s.length||(n=1==s.length?e.opt(s[0][0]):e.opt(e.anyof(...s.map(t=>t[0])))),this.tokenizer.expectToken(t,o.CLOSE_SQ)}else{if(!this.tokenizer.nextMatches(t,o.IDENT,o.STRING,o.NUMBER,o.REGEX))throw new r.zy(this.tokenizer.peek(t));{const e=this.tokenizer.next(t);let s=e.value;if(e.tag==o.STRING||e.tag==o.NUMBER){s=`"${e.value}"`;const t=l(e.value),n=r.M$.build(t,{tag:s,priority:20});this.generatedTokenizer.addRule(n)}else if(e.tag==o.REGEX){s="/"+e.value[0]+"/"+e.value[1];let t=e.value[0];e.value[1].length>0&&(t=new RegExp(e.value[0],e.value[1]));const n=r.M$.build(t,{tag:s,priority:10});this.generatedTokenizer.addRule(n)}const a=this.ensureSymbol(s,!0);n=new i.Mx(a)}}if(null==n)throw new Error("Could not determine node");this.tokenizer.consumeIf(t,o.STAR)?n=e.atleast0(n,this.leftRecursive):this.tokenizer.consumeIf(t,o.PLUS)?n=e.atleast1(n,this.leftRecursive):this.tokenizer.consumeIf(t,o.QMARK)&&(n=e.opt(n)),s.extend(n)}let n=null;if(this.tokenizer.consumeIf(t,o.OPEN_BRACE)){const e=this.tokenizer.expectToken(t,o.DOLLAR_NUM,o.IDENT);n=new i.Dj(e.value),this.tokenizer.expectToken(t,o.CLOSE_BRACE)}return[s,n]}}},2719(t,e,s){s.d(e,{HU:()=>d,MT:()=>c,TE:()=>a,Vg:()=>m,_L:()=>o,eD:()=>g,oz:()=>h,qg:()=>u,xq:()=>f});var n=s(6148),r=s(1787),i=s(5046),l=s(7276);function o(t,e="lr1"){switch(e){case"lr1":return c(t);case"lalr":return d(t)}return a(t)}function a(t){const e=h(t);return[m(e,t),e]}function h(t){const e=new l.WP(t).refresh();for(const s of e.itemSets.entries)u(t,e,s);return e}function u(t,e,s){for(const r of s.values){const i=e.items.get(r),l=i.rule;i.position>=l.rhs.length&&t.followSets.forEachTerm(l.nt,t=>{null!=t&&(n.vA(t.isTerminal),s.addLookAhead(i,t))})}}function c(t){const e=new l.Jh(t).refresh();return[m(e,t),e]}function d(t){const[e,s]=a(t);if(!e.hasConflicts)return[e,s];const n=f(s,t),r={};for(const t in s.gotoSets)for(const e in s.gotoSets[t]){const n=s.gotoSets[t][e];n.id in r||(r[n.id]={}),e in r[n.id]||(r[n.id][e]=new Set),r[n.id][e].add(t)}for(const i in e.conflictActions){const e=s.itemSets.get(i);g(t,n,s,e,r)}return[m(s,t),s]}function m(t,e){const s=new i.iS(e);for(const n of t.itemSets.entries){for(const r of n.values){const l=t.items.get(r),o=l.rule;if(l.position<o.rhs.length){const e=o.rhs.syms[l.position];if(e.isTerminal){const r=t.getGoto(n,e);r&&s.addAction(n.id,e,i.PZ.Shift(r.id))}}else if(!o.nt.equals(e.augStartRule.nt)){const t=n.getLookAheads(l);for(const e of t)s.addAction(n.id,e,i.PZ.Reduce(o))}}t.forEachGoto(n,(t,e)=>{null==t||t.isTerminal||s.addAction(n.id,t,i.PZ.Goto(e.id))});const r=t.items.ensure(new l.O6(e.augStartRule,1));n.addLookAhead(r,e.Eof),n.has(r.id)&&s.addAction(n.id,e.Eof,i.PZ.Accept())}return s}function g(t,e,s,r,i){function l(t,e,r,o){if(e<0){const e=s.gotoSets[r];n.vA(null!=(e[t.nt.id]||null),"Transition on rule.nt missing from start state"),o.add(r)}else{const s=t.rhs.syms[e],a=i[r][s.id]||null;n.vA(null!=a,"Prev set should not be null"),a.forEach(s=>l(t,e-1,s,o))}}r.clearLookAheads();for(const i of r.values){const o=s.items.get(i),a=o.rule;if(o.position>=a.rhs.length){const s=new Set;l(a,a.rhs.length-1,r.id,s),s.forEach(s=>{const i=`[${s}:${a.nt.label}]`,l=e.getSym(i);n.vA(null!=l,"Augmented grammar symbol [p:A] not found"),e.followSets.forEachTerm(l,s=>{if(null!=s&&s!=e.Eof){n.vA(s.isTerminal);const e=s.label.substring(s.label.indexOf(":")+1,s.label.length-1).trim(),i=t.getSym(e);n.vA(null!=i,`T (${e}) in [r:T] cannot be null`),r.addLookAhead(o,i)}})})}}}function f(t,e){const s=new r.IS;function i(t,n){const i=`[${t}:${n.label}]`,l=s.ensureSym(new r.gr(s,i,n.isTerminal),!1);return 0!=t||e.startSymbol!=n||e.startSymbol==l||n.isTerminal||(s.startSymbol=l),l}for(const s in t.gotoSets){const n=t.gotoSets[s];for(const t in n)i(s,e.getSymById(t))}function l(e,s,l){let o=e;const a=l.rhs.syms.map((e,s)=>{const r=i(o,e),l=t.gotoSets[o][e.id]||null;return n.vA(null!=l,"Next set transition *must* be valid"),o=l.id,r});return new r.Mx(...a)}for(const n in t.gotoSets){const o=t.gotoSets[n];for(const t in o){const o=e.getSymById(t),a=n;if(!o.isTerminal){const t=i(a,o);e.forEachRule(o,(e,n)=>{const i=l(a,0,e),o=new r.jO(t,i);s.addRule(o)})}}}return s}},4291(t,e,s){function n(t,e=!0){let s="";return t.forEachNT(n=>{e&&n.isAuxiliary||(s+=n.label+" -> ",s+=function(t,e,s=!0){let n="";const i="    ";for(let t=0;t<e.length;t++)t>0&&(s||(n+="\n",n+=i),n+=" | "),n+=r(0,e[t].rhs,s);return s||(n+="\n",n+=i),n+=" ;",n}(0,t.rulesForNT(n),e)+"\n\n")}),s}function r(t,e,s=!0){return e.debugString}s.d(e,{Jy:()=>n})},5046(t,e,s){s.d(e,{Jy:()=>n,PZ:()=>o,iS:()=>a,iX:()=>u,mW:()=>h});var n,r=s(6148),i=s(875),l=s(9383);!function(t){t[t.ACCEPT=0]="ACCEPT",t[t.SHIFT=1]="SHIFT",t[t.REDUCE=2]="REDUCE",t[t.GOTO=3]="GOTO"}(n||(n={}));class o{constructor(){this.gotoState=null,this.rule=null}toString(){return this.tag==n.ACCEPT?"Acc":this.tag==n.SHIFT?"S"+this.gotoState:this.tag==n.REDUCE?"R "+this.rule.id:""+this.gotoState}equals(t){return this.tag==t.tag&&this.gotoState==t.gotoState&&this.rule==t.rule}static Shift(t){const e=new o;return e.tag=n.SHIFT,e.gotoState=t,e}static Reduce(t){const e=new o;return e.tag=n.REDUCE,e.rule=t,e}static Goto(t){const e=new o;return e.tag=n.GOTO,e.gotoState=t,e}static Accept(){const t=new o;return t.tag=n.ACCEPT,t}}class a{constructor(t){this.grammar=t,this.conflictActions={},this.actions={}}get hasConflicts(){return Object.keys(this.conflictActions).length>0}getActions(t,e,s=!1){let n;if(t in this.actions)n=this.actions[t];else{if(!s)return[];n=this.actions[t]={}}return e.id in n?n[e.id]:s?n[e.id]=[]:[]}addAction(t,e,s){const n=this.getActions(t,e,!0);return n.findIndex(t=>t.equals(s))<0&&n.push(s),n.length>1&&(this.conflictActions[t]=this.conflictActions[t]||{},this.conflictActions[t][e.label]=!0),this}get debugValue(){const t={};for(const e in this.actions){t[e]={};for(const s in this.actions[e]){const n=this.grammar.getSymById(s),r=this.actions[e][n.id]||[];r.length>0&&(t[e][n.label]=r.map(t=>t.toString()))}}return t}}class h{constructor(){this.stateStack=[],this.nodeStack=[]}push(t,e){this.stateStack.push(t),this.nodeStack.push(e)}top(t=0){return[this.stateStack[this.stateStack.length-1-t],this.nodeStack[this.nodeStack.length-1-t]]}pop(){const t=this.top();return this.stateStack.pop(),this.nodeStack.pop(),t}popN(t=1){const e=this.stateStack.length;this.stateStack.splice(e-t,t),this.nodeStack.splice(e-t,t)}get isEmpty(){return 0==this.stateStack.length||0==this.nodeStack.length}}class u extends i.UB{constructor(t,e={}){super(),this.parseTable=t}get grammar(){return this.parseTable.grammar}parseInput(t,e){e=e||{},this.tokenbuffer.tokenizerContext=e.tokenizerContext,0!=e.buildParseTree&&(e.buildParseTree=!0),0!=e.copySingleChild&&(e.copySingleChild=!0);let s=0;const o=new h;o.push(0,new i.R4(s++,this.grammar.augStartRule.nt,null));const a=this.tokenbuffer,u=this.grammar;let c=null;function d(t){if(e?.actionResolver)return e.actionResolver(t,o,a);if(t.length>1)throw new Error("Multiple actions found.");return t[0]}function m(){try{return a.peek(t)}catch(s){if(!e?.onTokenError||!e?.onTokenError(s,t))throw s;return m()}}for(;;){let h=m();if(null==h){if(o.isEmpty)break}else e.onNextToken&&(h=e.onNextToken(h));const g=null==h?u.Eof:this.getSym(h),f=null==h?null:h.value;let[p,y]=o.top();const S=this.parseTable.getActions(p,g);if(null==S||0==S.length)throw new l.m(`Unexpected Token: '${g.label}'`,"UnexpectedToken",{state:p,token:h,nextSym:g});const T=d(S);if(T.tag==n.ACCEPT)break;if(T.tag==n.SHIFT){a.next(t);const e=new i.R4(s++,g,f);o.push(T.gotoState,e)}else{r.vA(null!=T.rule,"Nonterm and ruleindex must be provided for a reduction action");const t=T.rule.rhs.length;let n=new i.R4(s++,T.rule.nt,null);if(e.buildParseTree)for(let s=t-1;s>=0;s--){const t=o.top(s)[1];if(e.beforeAddingChildNode)for(const s of e.beforeAddingChildNode(n,t))n.add(s);else null!=t&&n.add(t)}if(T.rule.action)if(T.rule.action.isFunction){const t=T.rule.action.value,s=e.ruleHandlers[t];if(!s)throw new Error("Action handler not found: "+t);n.value=s(T.rule,n,...n.children)}else n.value=n.children[T.rule.action.value-1].value;else e.onReduction?n=e.onReduction(n,T.rule):1==n.children.length&&e.copySingleChild&&(n.value=n.children[0].value);o.popN(t),[p,y]=o.top();const l=d(this.parseTable.getActions(p,T.rule.nt));r.vA(null!=l&&null!=l.gotoState,"Top item does not have an action."),o.push(l.gotoState,n),c=n}}return c}}},5057(t,e,s){s.d(e,{GG:()=>o,N_:()=>l,S:()=>h,Y7:()=>c,bd:()=>i,dd:()=>a,de:()=>d});var n=s(6148);const r=t=>t.key;class i{constructor(t){this.root=new l,this.keyFunc=t}add(t,e=0){let s=this.root;for(let n=e;n<t.length;n++){const e=this.keyFunc(t[n]);if(s.children.has(e))s=s.children.get(e);else{const r=new l;r.value=t[n],r.parent=s,s.children.set(e,r),s=r}}return s.isLeaf=!0,s}get debugValue(){return this.root.debugValue}}class l{constructor(){this.isLeaf=!1,this.value=null,this.parent=null,this.children=new Map}get debugValue(){const t={value:this.value,children:{}};this.isLeaf&&(t.isLeaf=!0);for(const[e,s]of this.children.entries())t.children[e]=s.debugValue;return t}}class o{constructor(t=r){this._entries=[],this._entriesByKey={},this.keyFunc=t}clear(){this._entries=[],this._entriesByKey={}}remove(t){const e=[];this._entriesByKey={};let s=!1;for(let n=0;n<this._entries.length;n++){const r=this._entries[n];t(r)?s=!0:(r.id=e.length,e.push(r),this._entriesByKey[this.keyFunc(r)]=r)}return this._entries=e,s}get entries(){return this._entries}get(t){return n.vA(t>=0&&t<this._entries.length),this._entries[t]}getByKey(t){return this._entriesByKey[t]||null}ensure(t,e=!1){if(this.has(t)){if(e)throw new Error(`Entry ${this.keyFunc(t)} already exists`);return this._entriesByKey[this.keyFunc(t)]}return this._entriesByKey[this.keyFunc(t)]=t,t.id=this._entries.length,this._entries.push(t),t}has(t){return this.keyFunc(t)in this._entriesByKey}get size(){return this._entries.length}}class a{constructor(t,e=!0){this.entries=new Set,this.hasNull=!1,this.grammar=t,this.enforceSymbolType=e}get debugString(){return"<"+this.labels().sort().join(", ")+">"}labels(t=!1){const e=[];for(const s of this.entries){const r=this.grammar.getSymById(s);n.vA(null!=r),t&&r.isAuxiliary||e.push(r.label)}return this.hasNull&&e.push(""),e}addFrom(t,e=!0){return t.addTo(this,e)}addTo(t,e=!0){const s=t.entries.size;for(const e of this.entries)t.entries.add(e);return e&&(t.hasNull=this.hasNull||t.hasNull),t.entries.size-s}has(t){return this.entries.has(t.id)}add(t){return n.vA(null==this.enforceSymbolType||this.enforceSymbolType==t.isTerminal,`Terminal types being enforced: ${this.enforceSymbolType}`),this.entries.add(t.id),this}delete(t){return this.entries.delete(t.id)}get size(){return this.entries.size+(this.hasNull?1:0)}}class h{constructor(t){this.grammar=t,this.refresh()}get nonterms(){const t=[];return this.entries.forEach(e=>{const s=this.grammar.getSymById(e);n.vA(null!=s&&!s.isTerminal),t.push(s)}),t}refresh(){this.entries=new Set,this.visited={};let t=0;do{t=this.entries.size,this.grammar.allNonTerminals.forEach(t=>this.visit(t))}while(t!=this.entries.size)}visit(t){for(const e of this.grammar.rulesForNT(t))if(this.isStrNullable(e.rhs)){this.add(t);break}}isNullable(t){return!t.isTerminal&&this.entries.has(t.id)}isStrNullable(t,e=0,s=null){null==s&&(s=t.length-1);for(let n=e;n<=s;n++)if(!this.isNullable(t.syms[n]))return!1;return!0}add(t){n.vA(!t.isTerminal),this.entries.add(t.id)}}class u{constructor(t){this.entries={},this._count=0,this.grammar=t}refresh(){this.entries={},this._count=0}forEachTerm(t,e){const s=this.entriesFor(t);s.entries.forEach(t=>{const s=this.grammar.getSymById(t);n.vA(null!=s&&s.isTerminal),e(s)}),s.hasNull&&e(null)}get debugValue(){const t={};for(const e in this.entries)t[this.grammar.getSymById(e).label]=this.entries[e].debugString;return t}get count(){let t=0;for(const e in this.entries)t+=this.entries[e].size;return t}entriesFor(t){if(t.id in this.entries)return this.entries[t.id];{const e=new a(this.grammar);return this.entries[t.id]=e,e}}addNull(t){const e=this.entriesFor(t);return!e.hasNull&&(e.hasNull=!0,!0)}add(t,e,s=!0){t.isTerminal&&n.vA(!1,"Should not be here");const r=this.entriesFor(t);if(e.isTerminal){if(r.has(e))return!1;r.add(e),this._count++}else{const n=this.entriesFor(e),r=this.entriesFor(t),i=n.addTo(r,s);this._count+=i}return!0}}class c extends u{constructor(t,e){super(t),e||(e=new h(t)),this.nullables=e,this.refresh()}forEachTermIn(t,e=0,s){const n=t.syms,r={};let i=!0;for(let t=e;i&&t<n.length;t++){const e=n[t];if(e.isTerminal)s(e),i=!1;else{const t=e;this.forEachTerm(t,t=>{null==t||t.id in r||(r[t.id]=!0,s(t))}),this.nullables.isNullable(e)||(i=!1)}}i&&s(null)}refresh(){super.refresh();let t=0;do{t=this.count,this.grammar.forEachRule(null,t=>{this.processRule(t)})}while(t!=this.count)}processRule(t){const e=this.nullables;let s=!0;for(const n of t.rhs.syms)if(this.add(t.nt,n,!1),n.isTerminal||!e.isNullable(n)){s=!1;break}s&&this.addNull(t.nt)}}class d extends u{constructor(t,e){super(t),this.firstSets=e||new c(t),this.refresh()}get nullables(){return this.firstSets.nullables}refresh(){super.refresh();const t=this.grammar;n.vA(null!=t.startSymbol,"Select start symbol of the grammar"),this.add(t.startSymbol,t.Eof);let e=0;do{e=this.count,this.grammar.forEachRule(null,t=>this.processRule(t))}while(e!=this.count)}processRule(t){const e=t.rhs.syms,s=this.firstSets,n=this.firstSets.nullables;for(let n=0;n<e.length;n++){const r=e[n];r.isTerminal||s.forEachTermIn(t.rhs,n+1,t=>{null!=t&&this.add(r,t)})}for(let s=e.length-1;s>=0;s--){if(e[s].isTerminal)continue;let r=!0;for(let t=s+1;t<e.length;t++){const s=e[t];if(s.isTerminal||!n.isNullable(s)){r=!1;break}}r&&this.add(e[s],t.nt)}}}},5226(t,e,s){s.r(e),s.d(e,{allMinimalCycles:()=>r,digraph:()=>i});var n=s(6148);function r(t,e,s){const r=[],i={};return t.forEach(t=>{if(!(e(t)in i)){const l=t,o={};let a=[[t,[]]];for(;a.length>0;){const t=[];for(let h=0;h<a.length;h++){const[u,c]=a[h];n.vA(null!=u);const d=s(u);let m=[...c];for(const[s,n]of d)s==l?(m.push([n,s]),m.forEach(([t,e],s)=>i[e]=!0),r.push([l,m]),m=m.slice(0,m.length-1)):e(s)in o||(o[e(s)]=!0,t.push([s,[...m,[n,s]]]))}a=t}}}),r}function i(){}},5692(t,e,s){s.d(e,{Y:()=>a,y:()=>o});var n=s(2597),r=s(2719),i=s(5046),l=s(5253);function o(t,e=null){const s=e||{},[n,r,o]=a(t,s),h=new i.iX(n);return(s.tokenizer||r)&&h.setTokenizer(s.tokenizer||r),(s.debug||"").split("|").findIndex(t=>"all"==t||"parser"==t)>=0&&(0,l.b)(h,o),[h,r,o]}function a(t,e=null){const s=e||{},[i,l]=(0,n.load)(t,s);i.augmentStartSymbol();const[o,a]=(0,r._L)(i,s.type);return[o,l,a]}},6542(t,e,s){s.d(e,{M$:()=>n,jO:()=>i.jO,CC:()=>r,nZ:()=>a.nZ,UH:()=>h.U,_F:()=>E,zy:()=>o.z});var n={};s.r(n),s.d(n,{build:()=>m,exprFromFlexRE:()=>f,exprFromJSRE:()=>p,flatten:()=>g,flexRE:()=>S,jsRE:()=>y});var r={};s.r(r),s.d(r,{Lf:()=>R,yt:()=>N,cO:()=>v});var i=s(237),l=s(9727),o=(s(7872),s(8459),s(757)),a=s(1898),h=s(2041),u=s(2103),c=s(6066),d=s(570);function m(t,e){if("string"==typeof t){const s=new i.jO(p(t,e),e);return s.pattern=t,s}if("RegExp"==t.constructor.name){const s=new i.jO(p(t,e),e);return s.pattern=t.source,s}return new i.jO(t,e)}function g(t,e=0,s){if(s=s||[],"string"==typeof t)s.push(m(t,{tag:e}));else if(t.constructor==RegExp)s.push(m(t,{tag:e}));else if(t.constructor==i.jO)s.push(t);else if(t.constructor==i.Ge)s.push(new i.jO(t));else{const e=t;for(let t=0;t<e.length;t++)g(e[t],t,s)}return s}function f(t){const e=new d.F;try{const s=e.parse(new a.nZ(t));return null==s.dotAll&&(s.dotAll=!1),null==s.multiline&&(s.multiline=!1),s}catch(e){throw console.log("Error in FLEX RE: ",t),e}}function p(t,e){e=e||{};const s="string"!=typeof t,n="string"==typeof t?t:t.source;s&&(e.unicode=t.unicode);const r=new c.F(n,e).parse();return"string"!=typeof t&&(r.dotAll=t.dotAll,r.ignoreCase=t.ignoreCase,r.multiline=t.multiline),r}function y(t,...e){return p(String.raw(t,...e))}function S(t,...e){return f(String.raw(t,...e))}function T(t,e,s){const n=new h.o(t,e.matchIndex,e.start,e.end);for(let t=0;t<e.positions.length;t+=2)e.positions[t]>=0&&(n.positions[Math.floor(t/2)]=[e.positions[t],e.positions[t+1]]);for(const[t,s]of e.groups){const e=Math.abs(t);e in n.groups||(n.groups[e]=[]),n.groups[e].push(s)}return null!=s&&(n.value=s.substring(e.start,e.end)),n}class b{constructor(){this._prog=null,this._vm=null,this.onError=null,this.allRules=[],this.onMatchHandlers=[],this.matchHandlersByValue={},this.variables=new Map,this.compiler=new l.Q(t=>{let e=this.variables.get(t)||null;if(null==e&&(e=this.findRuleByValue(t)?.expr||null),null==e)throw new Error(`Invalid regex reference: ${t}`);return e})}getVar(t){return this.variables.get(t)||null}addVar(t,e){let s=this.variables.get(t)||null;return s=null==s?e:new i.gP(s,e),this.variables.set(t,e),this}findRuleByValue(t){return this.allRules.find(e=>e.tag==t)||null}add(t,e,s=null){return"function"==typeof e&&(s=e,e=null),this.addRule(m(t,e),s)}addRule(t,e=null){return t.matchIndex=this.allRules.length,this.allRules.push(t),this.onMatchHandlers.push(e),this._prog=null,this._vm=null,this}on(t,e){return this.matchHandlersByValue[t]=e,this}get prog(){if(null==this._prog){const t=this.sortRules();this._prog=this.compiler.compile(t)}return this._prog}get vm(){return null==this._vm&&(this._vm=new u.VM(this.prog)),this._vm}sortRules(){const t=this.allRules.map(t=>t);return t.sort((t,e)=>t.priority!=e.priority?e.priority-t.priority:t.matchIndex-e.matchIndex),t}}class E extends b{constructor(){super(...arguments),this.idCounter=0}getState(){return this.vm.getState()}setState(t){this.vm.setState(t)}reset(){this.idCounter=0,this._vm&&this._vm.setState(0)}next(t,e){if(!t.hasMore)return null;const s=t.index,n=t.currCh,r=this.vm.match(t);if(null==r){let r=null;if(r=t.index==s+1?new o.S(`Unexpected Character: ${n}`,s,1,"UnexpectedCharacter",n):new o.S(`Unexpected Symbol: ${t.substring(s,t.index)}`,s,t.index-s,"UnexpectedLexeme"),this.onError&&(r=this.onError(r,t,s)),null!=r)throw r;return this.next(t,e)}const i=this.allRules[r.matchIndex];let l=T(i.tag,r,t);l.id=this.idCounter++;let a=this.onMatchHandlers[r.matchIndex];if(a||(a=this.matchHandlersByValue[i.tag]),a){if(l=a(i,t,l,e),null==l)return this.next(t,e)}else if(i.skip)return this.next(t,e);return l}tokenize(t,e=null){const s=[];"string"==typeof t&&(t=new a.nZ(t));let n=this.next(t,e);for(;n;){s.push(n);try{n=this.next(t,e)}catch(t){s.push({tag:"ERROR",start:t.offset,end:t.offset+t.length,value:t.message});break}}return s}}s(1212),s(9777);const v=S`["]([^"\\\n]|\\.|\\\n)*["]`,R=S`[']([^'\\\n]|\\.|\\\n)*[']`,N=String.raw`/(.+?(?<!\\))/([imus]*)`},7276(t,e,s){s.d(e,{Ip:()=>l,Jh:()=>h,O6:()=>i,WP:()=>a,mo:()=>o});var n=s(6148),r=s(5057);class i{constructor(t,e=0){this.id=0,this.rule=t,this.position=e}advance(){return n.vA(this.position<this.rule.rhs.length),new i(this.rule,this.position+1)}copy(){return new i(this.rule,this.position)}get key(){return n.vA(!isNaN(this.rule.id),"Rule's ID is not yet set."),this.rule.id+":"+this.position}compareTo(t){let e=this.rule.id-t.rule.id;return 0==e&&(e=this.position-t.position),e}equals(t){return 0==this.compareTo(t)}get debugString(){const t=this.rule,e=this.position,s=t.rhs.syms.slice(0,e).join(" "),n=t.rhs.syms.slice(e).join(" ");return`${t.id}  -  ${t.nt} -> ${s} â€¢ ${n}`}}class l{constructor(t,...e){this.id=0,this._key=null,this._lookaheads={},this._hasLookAheads=!1,this.itemGraph=t,this.values=e}copy(){const t=new l(this.itemGraph,...this.values);return t._lookaheads={...this._lookaheads},t._hasLookAheads=this._hasLookAheads,t}addLookAhead(t,e){t.id in this._lookaheads||(this._lookaheads[t.id]=[]);for(const s of this._lookaheads[t.id])if(s==e)return!1;return this._hasLookAheads=!0,this._key=null,this._lookaheads[t.id].push(e),this._lookaheads[t.id].sort((t,e)=>t.id-e.id),!0}clearLookAheads(){this._lookaheads={}}getLookAheads(t){return this._lookaheads[t.id]||[]}get key(){return null==this._key&&(this._key=this.revalKey()),this._key}revalKey(){return this.hasLookAheads?(this.values.sort(),this.values.map(t=>t+"["+(this._lookaheads[t]||[]).map(t=>t.id).join(",")+"]").join("/")):(this.values.sort(),this.values.join("/"))}has(t){return this.values.indexOf(t)>=0}equals(t){return this.key==t.key}add(t){return this.has(t)||(this.values.push(t),this._key=null),this}get size(){return this.values.length}get debugString(){return this.debugValue.join("\n")}get hasLookAheads(){return this._hasLookAheads}get debugValue(){if(this.hasLookAheads){const t=this.values.map(t=>this.itemGraph.items.get(t));return t.sort((t,e)=>t.compareTo(e)),t.map(t=>{const e=this.getLookAheads(t).map(t=>t.label).sort((t,e)=>t.localeCompare(e)).join(", ");return e.length>0?`${t.debugString} / ( ${e} )`:t.debugString})}{const t=this.values.map(t=>this.itemGraph.items.get(t));return t.sort((t,e)=>t.compareTo(e)),t.map(t=>t.debugString)}}}class o{constructor(t){this.grammar=t,this.gotoSets={},this.items=new r.GG,this.itemSets=new r.GG}startItem(){const t=this.grammar.startSymbol;return n.vA(null!=t,"Start symbol must be set"),n.vA(null!=(this.grammar.augStartRule||null),"Grammar is not augmented"),this.items.ensure(new i(this.grammar.augStartRule))}reset(){this.grammar.refresh(),this.gotoSets={},this.items.clear(),this.itemSets.clear(),this.startSet()}refresh(){return this.reset(),this.grammar.refresh(),this.evalGotoSets(),this}evalGotoSets(){const t=this.itemSets;for(let e=0;e<t.size;e++){const s=t.get(e);for(const t of this.grammar.allSymbols)if(t!=this.grammar.Null){const e=this.goto(s,t);e.size>0&&this.setGoto(s,t,e)}}}goto(t,e){const s=this.newItemSet();for(const n of t.values){const r=this.items.get(n),i=r.rule;r.position<i.rhs.length&&i.rhs.syms[r.position]==e&&this.advanceItemAndAdd(r,t,s)}return this.closure(s)}advanceItemAndAdd(t,e,s){const n=this.items.ensure(t.advance());s.add(n.id);for(const r of e.getLookAheads(t))s.addLookAhead(n,r)}newItemSet(...t){return new l(this,...t.map(t=>t.id))}get size(){return this.itemSets.size}ensureGotoSet(t){return t.id in this.gotoSets||(this.gotoSets[t.id]={}),this.gotoSets[t.id]}setGoto(t,e,s){this.ensureGotoSet(t)[e.id]=s}getGoto(t,e){return(this.gotoSets[t.id]||{})[e.id]||null}forEachGoto(t,e){const s=this.gotoSets[t.id]||{};for(const t in s)if(0==e(this.grammar.getSymById(t),s[t]))break}gotoSetFor(t){return this.gotoSets[t.id]||{}}get debugValue(){const t={};return this.itemSets.entries.forEach(e=>{t[e.id]={items:[],goto:{}},t[e.id].items=e.debugValue;const s=this.gotoSets[e.id];for(const n in s){const r=this.grammar.getSymById(n);t[e.id].goto=t[e.id].goto||{},t[e.id].goto[r.label]=s[n].id}}),t}}class a extends o{startSet(){const t=this.startItem(),e=this.newItemSet(t);return this.closure(e)}closure(t){const e=new l(this,...t.values);for(let t=0;t<e.values.length;t++){const s=e.values[t],n=this.items.get(s),r=n.rule;if(n.position<r.rhs.length){const t=r.rhs.syms[n.position];if(!t.isTerminal)for(const s of this.grammar.rulesForNT(t)){const t=this.items.ensure(new i(s,0));e.add(t.id)}}}return 0==e.size?e:this.itemSets.ensure(e)}}class h extends o{startSet(){const t=this.startItem(),e=this.newItemSet(t);return e.addLookAhead(t,this.grammar.Eof),this.closure(e)}closure(t){const e=t.copy();for(let t=0;t<e.values.length;t++){const s=e.values[t],n=this.items.get(s);if(n.position>=n.rule.rhs.length)continue;const r=n.rule.rhs,l=r.syms[n.position];if(!l.isTerminal)for(const t of e.getLookAheads(n)){const s=r.copy().append(t);this.grammar.firstSets.forEachTermIn(s,n.position+1,t=>{if(null!=t){const s=this.grammar.rulesForNT(l);for(const n of s){const s=this.items.ensure(new i(n,0));e.add(s.id),e.addLookAhead(s,t)}}})}}return 0==e.size?e:this.itemSets.ensure(e)}}},9383(t,e,s){s.d(e,{m:()=>n});class n extends Error{constructor(t,e,s=null){super(t),this.type=e,this.value=s,Object.setPrototypeOf(this,new.target.prototype)}get name(){return this.constructor.name}}},9757(t,e,s){s.r(e),s.d(e,{parseTableToHtml:()=>i});var n=s(5046);function r(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function i(t,e={}){const s=e.parseTableClass||"parseTable",i=e.itemGraph||null,l=e.gotoSymbolSorter?[...t.grammar.allSymbols].sort(e.gotoSymbolSorter):t.grammar.allSymbols;let o=`<table border = 1 class = '${s}'>`;o+="<thead><td></td>";for(const t of l)o+=`<td class = "symHeaderCell" symID = "${t.id}">${t.label}</td>`;const a=Object.keys(t.actions).length;for(let e=0;e<a;e++){o+="<tr>";let s=`${e}`,a="";if(i&&e<i.itemSets.size){const t=i.itemSets.get(e).debugValue;if(a=t.join("\n"),t.length>0){const n=t[0],i=n.match(/^\d+\s*-\s*(.+)$/);s=`<div class="stateNum">${e}</div><div class="stateHint">${r(i?i[1]:n)}</div>`}}let h=!1;for(const s of l)if(t.getActions(e,s).length>1){h=!0;break}o+=`<td class = "${h?"stateHeaderCell hasConflicts":"stateHeaderCell"}" stateID = "${e}" title="${r(a)}">${s}</td>`;for(const s of l){const r=t.getActions(e,s);let i=" actionCell";0==r.length?i+=" emptyActions":r.length>1&&(i+=" multipleActions"),o+=`<td class = "${i}" stateId = ${e} symID = "${s.id}">`;const l=[];for(const t of r)t.tag==n.Jy.GOTO?l.push(`<div class = "gotoActionCell">${t.gotoState}</div>`):t.tag==n.Jy.ACCEPT?l.push('<div class = "acceptActionCell">ACCEPT</div>'):t.tag==n.Jy.SHIFT?l.push(`<div class = "shiftActionCell">S${t.gotoState}</div>`):t.tag==n.Jy.REDUCE&&l.push(`<div class = "reduceActionCell">R${t.rule.id}</div>`);o+=l.join("\n"),o+="</td>"}o+="</tr>"}return o+="</thead>",o+="</table>",o}}}]);
//# sourceMappingURL=944.907eb0dc93a6d31251ba.js.map