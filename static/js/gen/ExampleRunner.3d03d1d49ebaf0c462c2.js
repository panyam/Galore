!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("galore",[],n):"object"==typeof exports?exports.galore=n():(e.galore=e.galore||{},e.galore.ExampleRunner=n())}(this,()=>(()=>{"use strict";var e,n={6590(e,n,t){t.r(n),t.d(n,{ExampleRunner:()=>l});var r=t(9058),i=t(4516),a=t.n(i);t(2145),t(621),t(8542),t(8005);const s=[{name:"Calculator",label:"Calculator",selected:!0,grammar:'\n%token NUMBER /\\d+(\\.\\d+)?/\n%token ID /[a-zA-Z_][a-zA-Z0-9_]*/\n%skip /[ \\t\\n\\f\\r]+/\n\nProgram -> Statement* ;\nStatement -> Assignment ";" | Expr ";" ;\nAssignment -> ID "=" Expr ;\nExpr -> Expr "+" Term | Expr "-" Term | Term ;\nTerm -> Term "*" Factor | Term "/" Factor | Factor ;\nFactor -> ParenExpr | NUMBER | FuncCall | "-" Factor ;\nFuncCall -> ID | ID ParenExpr | ID CommaExprList ;\nCommaExprList -> "(" Expr ( "," Expr ) + ")" | "(" ")";\nParenExpr -> "(" Expr ")" ;\n    '.trim(),sampleInput:"x = 10;\ny = 20;\nx + y * 2;",actionCode:'// Calculator evaluator with statement formatting\nconst vars = {};\nconst output = [];\n\n// Convert parse tree node to source text (without ";")\nfunction nodeToString(n) {\n  if (!n) return "";\n  if (n.value !== undefined && !n.children?.length) return n.value;\n  if (n.children) {\n    return n.children\n      .filter(c => c.sym?.label !== ";")\n      .map(nodeToString).join(" ");\n  }\n  return "";\n}\n\nfunction evaluate(n) {\n  if (!n) return 0;\n  const sym = n.sym?.label;\n  const kids = n.children || [];\n\n  if (sym === "NUMBER") return parseFloat(n.value);\n  if (sym === "ID") return vars[n.value] ?? 0;\n\n  if (sym === "Assignment") {\n    const name = kids[0].value;\n    const val = evaluate(kids[2]);\n    vars[name] = val;\n    return val;\n  }\n\n  if (sym === "Expr" || sym === "Term") {\n    if (kids.length === 3) {\n      const l = evaluate(kids[0]);\n      const op = kids[1].value;\n      const r = evaluate(kids[2]);\n      if (op === "+") return l + r;\n      if (op === "-") return l - r;\n      if (op === "*") return l * r;\n      if (op === "/") return l / r;\n    }\n  }\n\n  if (sym === "Factor") {\n    // Factor -> ParenExpr | NUMBER | FuncCall (1 child) or "-" Factor (2 children)\n    if (kids.length === 1) {\n      return evaluate(kids[0]);\n    } else if (kids.length === 2) {\n      // Unary minus: "-" Factor\n      return -evaluate(kids[1]);\n    }\n    return 0;\n  }\n\n  if (sym === "ParenExpr") {\n    // ParenExpr -> "(" Expr ")" (3 children, middle is Expr)\n    return evaluate(kids[1]);\n  }\n\n  if (sym === "FuncCall") {\n    const funcName = kids[0].value;\n\n    // FuncCall -> ID (just a variable reference)\n    if (kids.length === 1) {\n      return vars[funcName] ?? 0;\n    }\n\n    // FuncCall -> ID ParenExpr (single argument function)\n    if (kids.length === 2 && kids[1].sym?.label === "ParenExpr") {\n      const arg = evaluate(kids[1]);\n      if (typeof Math[funcName] === \'function\') {\n        return Math[funcName](arg);\n      }\n      return 0;\n    }\n\n    // FuncCall -> ID CommaExprList (multiple argument function)\n    if (kids.length === 2 && kids[1].sym?.label === "CommaExprList") {\n      const argList = kids[1].children || [];\n      const args = argList\n        .filter(c => c.sym?.label === "Expr")\n        .map(c => evaluate(c));\n      if (typeof Math[funcName] === \'function\') {\n        return Math[funcName](...args);\n      }\n      return 0;\n    }\n\n    return 0;\n  }\n\n  if (sym === "Statement") {\n    const stmtNode = kids[0];\n    const text = nodeToString(stmtNode);\n    const val = evaluate(stmtNode);\n    output.push(text + "  â†’  " + val);\n    return val;\n  }\n\n  if (sym === "Program") {\n    for (const stmt of kids) evaluate(stmt);\n    return output.join("\\n");\n  }\n\n  // Default: recurse\n  let result = 0;\n  for (const c of kids) result = evaluate(c);\n  return result;\n}\n\nreturn evaluate(node);'},{name:"JSON",label:"JSON",grammar:'\n%token NUMBER /-?\\d+(\\.\\d+)?([eE][+-]?\\d+)?/\n%token STRING /".*?(?<!\\\\)"/\n%skip /[ \\t\\n\\f\\r]+/\n\nValue -> Dict | List | STRING | NUMBER | Boolean | "null" ;\nList -> "[" [ Value ( "," Value ) * ] "]" ;\nDict -> "{" [ Pair ("," Pair)* ] "}" ;\nPair -> STRING ":" Value ;\nBoolean -> "true" | "false" ;\n    '.trim(),sampleInput:'{\n  "name": "Milky Way",\n  "age": 4600000000,\n  "star": "sun",\n  "planets": [ "Mercury", "Venus", "Earth" ],\n  "hot": true,\n  "x": null\n}'},{name:"Arithmetic",label:"Arithmetic",grammar:'\n%token NUMBER /\\d+/\n%skip /[ \\t\\n\\f\\r]+/\n\nExpr -> Expr "+" Term | Expr "-" Term | Term ;\nTerm -> Term "*" Factor | Term "/" Factor | Factor ;\nFactor -> "(" Expr ")" | NUMBER | "-" Factor ;\n    '.trim(),sampleInput:"1 + 2 * 3",actionCode:'// Simple arithmetic evaluator\nfunction evaluate(n) {\n  if (!n) return 0;\n  const sym = n.sym?.label;\n  const kids = n.children || [];\n\n  if (sym === "NUMBER") return parseInt(n.value);\n\n  if (sym === "Expr" || sym === "Term") {\n    if (kids.length === 3) {\n      const l = evaluate(kids[0]);\n      const op = kids[1].value;\n      const r = evaluate(kids[2]);\n      if (op === "+") return l + r;\n      if (op === "-") return l - r;\n      if (op === "*") return l * r;\n      if (op === "/") return l / r;\n    }\n  }\n\n  if (sym === "Factor") {\n    // NUMBER (1 child), "(" Expr ")" (3 children), or "-" Factor (2 children)\n    if (kids.length === 1) {\n      return evaluate(kids[0]);\n    } else if (kids.length === 2) {\n      // Unary minus: "-" Factor\n      return -evaluate(kids[1]);\n    } else if (kids.length === 3) {\n      // Parenthesized expression: middle child is the Expr\n      return evaluate(kids[1]);\n    }\n    return 0;\n  }\n\n  // Default: recurse\n  for (const c of kids) {\n    const v = evaluate(c);\n    if (v !== undefined) return v;\n  }\n  return 0;\n}\n\nreturn evaluate(node);'},{name:"FarshiG3",label:"Farshi G3 (Ambiguous)",grammar:'\n%token b "b"\n%token x "x"\n%skip /[ \\t\\n\\f\\r]+/\n\nS -> A S b ;\nS -> x ;\nA -> ;\n    '.trim(),sampleInput:"x b b"},{name:"DanglingElse",label:"Dangling Else (Conflict)",grammar:'\n%token IF "if"\n%token THEN "then"\n%token ELSE "else"\n%token EXPR "expr"\n%token OTHER "other"\n%skip /[ \\t\\n\\f\\r]+/\n\nStmt -> IF EXPR THEN Stmt\n      | IF EXPR THEN Stmt ELSE Stmt\n      | OTHER ;\n    '.trim(),sampleInput:"if expr then if expr then other else other"},{name:"AmbiguousExpr",label:"Ambiguous Expr (Conflict)",grammar:'\n%token NUMBER /\\d+/\n%skip /[ \\t\\n\\f\\r]+/\n\nE -> E "+" E | E "*" E | NUMBER ;\n    '.trim(),sampleInput:"1 + 2 * 3"}];var o=t(6383);class l{constructor(e,n){this.resolvedGrammar="",this.resolvedInput="",this.resolvedActionCode="",this.grammarEditor=null,this.inputEditor=null,this.actionEditor=null,this.outputContainer=null,this.currentParser=null,this.actionCompiler=null,this.actionCodeModified=!1,this.originalActionCode="";const t=document.getElementById(e);if(t){if(this.container=t,this.config=n,n.grammarName){const e=s.find(e=>e.name===n.grammarName);e?(this.resolvedGrammar=e.grammar,this.resolvedInput=n.input||e.sampleInput||"",this.resolvedActionCode=n.actionCode||e.actionCode||""):(console.error(`Grammar "${n.grammarName}" not found in builtinGrammars`),this.resolvedGrammar=n.grammar||"",this.resolvedInput=n.input||"",this.resolvedActionCode=n.actionCode||"")}else this.resolvedGrammar=n.grammar||"",this.resolvedInput=n.input||"",this.resolvedActionCode=n.actionCode||"";this.init()}else console.error(`Container #${e} not found`)}isDarkMode(){return document.documentElement.classList.contains("dark")}getEditorTheme(){return this.isDarkMode()?"ace/theme/monokai":"ace/theme/github"}init(){this.render(),this.setupEditors(),this.setupEventListeners(),new MutationObserver(()=>{this.updateEditorThemes()}).observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),setTimeout(()=>this.run(),100)}render(){this.container.innerHTML=`\n      <div class="example-runner">\n        <div class="example-main">\n          <div class="example-column example-grammar-column">\n            <div class="example-panel-header">\n              <span class="example-panel-title">Grammar</span>\n              <button class="example-copy-btn" data-target="grammar" title="Copy grammar">\n                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>\n                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>\n                </svg>\n              </button>\n            </div>\n            <div class="example-editor-container" id="example-grammar-editor"></div>\n          </div>\n          <div class="example-column example-io-column">\n            <div class="example-io-row example-input-row">\n              <div class="example-panel-header">\n                <span class="example-panel-title">Input</span>\n                <button class="example-run-btn" title="Run">\n                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n                    <polygon points="5 3 19 12 5 21 5 3"></polygon>\n                  </svg>\n                  Run\n                </button>\n              </div>\n              <div class="example-editor-container example-input-editor" id="example-input-editor"></div>\n            </div>\n            <div class="example-io-row example-output-row">\n              <div class="example-panel-header">\n                <span class="example-panel-title">Output</span>\n              </div>\n              <div class="example-output-container" id="example-output"></div>\n            </div>\n          </div>\n        </div>\n        ${this.resolvedActionCode?'\n        <div class="example-actions">\n          <div class="example-panel-header">\n            <span class="example-panel-title">Action Code</span>\n            <span class="example-action-status" id="example-action-status"></span>\n            <button class="example-copy-btn" data-target="action" title="Copy action code">\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>\n                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>\n              </svg>\n            </button>\n          </div>\n          <div class="example-editor-container" id="example-action-editor"></div>\n        </div>\n        ':""}\n      </div>\n    `}setupEditors(){const e=this.getEditorTheme(),n=this.container.querySelector("#example-grammar-editor");n&&(this.grammarEditor=a().edit(n),this.grammarEditor.setTheme(e),this.grammarEditor.session.setMode("ace/mode/text"),this.grammarEditor.setValue(this.resolvedGrammar.trim(),-1),this.grammarEditor.setOptions({fontSize:"13px",showPrintMargin:!1,maxLines:20,minLines:5}));const t=this.container.querySelector("#example-input-editor");if(t&&(this.inputEditor=a().edit(t),this.inputEditor.setTheme(e),this.inputEditor.session.setMode("ace/mode/text"),this.inputEditor.setValue(this.resolvedInput.trim(),-1),this.inputEditor.setOptions({fontSize:"13px",showPrintMargin:!1,maxLines:10,minLines:3})),this.resolvedActionCode){const n=this.container.querySelector("#example-action-editor");if(n){this.actionEditor=a().edit(n),this.actionEditor.setTheme(e),this.actionEditor.session.setMode("ace/mode/javascript"),this.originalActionCode=this.resolvedActionCode.trim(),this.actionEditor.setValue(this.originalActionCode,-1),this.actionEditor.setOptions({fontSize:"13px",showPrintMargin:!1,maxLines:25,minLines:5}),this.actionEditor.session.on("change",()=>{this.actionCodeModified=this.actionEditor.getValue()!==this.originalActionCode});const t=this.container.querySelector("#example-action-status");this.actionCompiler=new o.SN(this.actionEditor,t),this.actionCompiler.compile()}}this.outputContainer=this.container.querySelector("#example-output")}setupEventListeners(){const e=this.container.querySelector(".example-run-btn");e&&e.addEventListener("click",()=>this.run()),this.container.querySelectorAll(".example-copy-btn").forEach(e=>{e.addEventListener("click",e=>{const n=e.currentTarget.dataset.target;this.copyToClipboard(n||"")})}),this.inputEditor?.commands.addCommand({name:"run",bindKey:{win:"Ctrl-Enter",mac:"Cmd-Enter"},exec:()=>this.run()})}updateEditorThemes(){const e=this.getEditorTheme();this.grammarEditor?.setTheme(e),this.inputEditor?.setTheme(e),this.actionEditor?.setTheme(e)}copyToClipboard(e){let n="";"grammar"===e&&this.grammarEditor?n=this.grammarEditor.getValue():"action"===e&&this.actionEditor&&(n=this.actionEditor.getValue()),n&&navigator.clipboard.writeText(n).then(()=>{this.showCopyFeedback(e)})}showCopyFeedback(e){const n=this.container.querySelector(`[data-target="${e}"]`);if(n){const e=n.innerHTML;n.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n        <polyline points="20 6 9 17 4 12"></polyline>\n      </svg>',setTimeout(()=>{n.innerHTML=e},1500)}}run(){if(!this.outputContainer)return;const e=this.grammarEditor?.getValue()||"",n=this.inputEditor?.getValue()||"";this.outputContainer.innerHTML='<div class="example-loading">Running...</div>';try{const[t]=r.newParser(e,{type:"lalr"});this.currentParser=t;const i=t.parse(n);let a=null,s=null;if(this.actionCompiler&&this.actionCodeModified&&i){const e=this.actionCompiler.run(i);e.success?a=e.result:e.error&&(s={message:e.error,line:e.line??void 0})}else if(this.config.actionFn&&i)try{a=this.config.actionFn(i)}catch(e){s={message:e.message}}else if(this.actionCompiler&&i){const e=this.actionCompiler.run(i);e.success?a=e.result:e.error&&(s={message:e.error,line:e.line??void 0})}this.displayResults(i,a,s)}catch(e){this.outputContainer.innerHTML=`<div class="example-error">${this.escapeHtml(e.message)}</div>`}}displayResults(e,n,t=null){if(!this.outputContainer)return;let r='<div class="example-results">';if(t&&(r+='<div class="example-result-section">',r+='<div class="example-result-label">Action Error:</div>',r+='<div class="example-action-error">',r+=`<span class="example-error">${this.escapeHtml(t.message)}</span>`,void 0!==t.line&&(r+=`<span class="example-error-line"> (line ${t.line+1})</span>`),r+="</div>",r+="</div>"),null!==n&&!t){r+='<div class="example-result-section">',r+='<div class="example-result-label">Result:</div>',r+='<div class="example-action-result">';const e="string"==typeof n?n:JSON.stringify(n,null,2);r+=`<pre class="example-value">${this.escapeHtml(e)}</pre>`,r+="</div>",r+="</div>"}r+='<div class="example-result-section">',r+='<div class="example-result-label">Parse Tree:</div>',r+='<div class="example-parse-tree">',r+=this.renderParseTree(e),r+="</div>",r+="</div>",r+="</div>",this.outputContainer.innerHTML=r}renderParseTree(e,n=0){if(!e)return'<span class="example-null">null</span>';const t="  ".repeat(n);let r="";const i=e.sym?.label||"?";if(e.children&&e.children.length>0){r+=`${t}<span class="example-node">${this.escapeHtml(i)}</span>\n`;for(const t of e.children)r+=this.renderParseTree(t,n+1)}else{const n=void 0!==e.value?`: ${JSON.stringify(e.value)}`:"";r+=`${t}<span class="example-leaf">${this.escapeHtml(i)}</span><span class="example-value">${this.escapeHtml(n)}</span>\n`}return r}escapeHtml(e){const n=document.createElement("div");return n.textContent=e,n.innerHTML}}document.addEventListener("DOMContentLoaded",()=>{(0,o.FG)(),document.querySelectorAll("[data-example-runner]").forEach(e=>{const n=e.id,t=e.getAttribute("data-example-config");if(n&&t)try{const e=JSON.parse(t);new l(n,e)}catch(e){console.error("Failed to parse example config:",e)}})}),window.ExampleRunner=l}},t={};function r(e){var i=t[e];if(void 0!==i)return i.exports;var a=t[e]={id:e,loaded:!1,exports:{}};return n[e](a,a.exports,r),a.loaded=!0,a.exports}r.m=n,r.amdD=function(){throw new Error("define cannot be used indirect")},e=[],r.O=(n,t,i,a)=>{if(!t){var s=1/0;for(d=0;d<e.length;d++){for(var[t,i,a]=e[d],o=!0,l=0;l<t.length;l++)(!1&a||s>=a)&&Object.keys(r.O).every(e=>r.O[e](t[l]))?t.splice(l--,1):(o=!1,a<s&&(s=a));if(o){e.splice(d--,1);var c=i();void 0!==c&&(n=c)}}return n}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[t,i,a]},r.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return r.d(n,{a:n}),n},r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={549:0};r.O.j=n=>0===e[n];var n=(n,t)=>{var i,a,[s,o,l]=t,c=0;if(s.some(n=>0!==e[n])){for(i in o)r.o(o,i)&&(r.m[i]=o[i]);if(l)var d=l(r)}for(n&&n(t);c<s.length;c++)a=s[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},t=this.webpackChunkgalore=this.webpackChunkgalore||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var i=r.O(void 0,[906,553,72],()=>r(6590));return r.O(i)})());
//# sourceMappingURL=ExampleRunner.3d03d1d49ebaf0c462c2.js.map